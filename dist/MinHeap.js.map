{"version":3,"file":"MinHeap.js","sources":["../src/util.js","../src/MinHeap.js"],"sourcesContent":["/**\r\n * @Description:\r\n * @Author:  wuenyou\r\n * @Date: 2020/11/18\r\n * @LastEditors:\r\n * @LastEditTime: 2020/11/18\r\n */\r\nexport const defaultEquals = function (a, b) {\r\n\treturn a === b\r\n}\r\nconst COMPARE = {\r\n\tEQUAL: 0,\r\n\tLESS_THAN: -1,\r\n\tBIGGER_THAN: 1\r\n}\r\nexport function defaultCompare(a, b) {\r\n\tif (a === b) {\r\n\t\treturn COMPARE.EQUAL;\r\n\t} else if (a < b) {\r\n\t\treturn COMPARE.LESS_THAN;\r\n\t} else {\r\n\t\treturn COMPARE.BIGGER_THAN;\r\n\t}\r\n}\r\nexport function\tkeyToString(str) {\r\n\tif (str === null) {\r\n\t\treturn 'null';\r\n\t} else if (str === undefined) {\r\n\t\treturn 'undefined';\r\n\t} else if(typeof str === 'function') {\r\n\t\treturn str.toString();\r\n\t}\r\n\treturn JSON.stringify(str)\r\n}\r\n","/**\r\n * @Description:\r\n * @Author:  wuenyou\r\n * @Date: 2020/12/15\r\n * @LastEditors:\r\n * @LastEditTime: 2020/12/15\r\n */\r\nimport {defaultCompare} from \"./util\";\r\nconst COMPARE = {\r\n\tEQUAL: 0,\r\n\tLESS_THAN: -1,\r\n\tBIGGER_THAN: 1\r\n}\r\nexport default class MinHeap {\r\n\tconstructor(compareFn = defaultCompare) {\r\n\t\tthis.heap = [];\r\n\t\tthis.comparFn = compareFn;\r\n\t}\r\n\tgetParentIndex(i) {\r\n\t\treturn i ? Math.floor((i - 1) / 2) : undefined;\r\n\t}\r\n\tgetLeftIndex(i) {\r\n\t\treturn 2 * i + 1;\r\n\t}\r\n\tgetRightIndex(i) {\r\n\t\treturn 2 * i + 2;\r\n\t}\r\n\tinsert(val) {\r\n\t\tif(val != null) {\r\n\t\t\tthis.heap.push(val);\r\n\t\t\tthis.siftUp(this.heap.length - 1);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tsiftUp(index) {\r\n\t\tlet parent = this.getParentIndex(index);\r\n\t\twhile (index > 0 && this.comparFn(this.heap[parent], this.heap[index]) === COMPARE.BIGGER_THAN) {\r\n\t\t\t[this.heap[parent], this.heap[index]] = [this.heap[index], this.heap[parent]];\r\n\t\t\tindex = parent;\r\n\t\t\tparent = this.getParentIndex(index);\r\n\t\t}\r\n\t}\r\n\tsize() {\r\n\t\treturn this.heap.length;\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn this.heap.length === 0;\r\n\t}\r\n\tfindMinnum() {\r\n\t\treturn this.heap[0];\r\n\t}\r\n\textract() {\r\n\t\tif(this.isEmpty()) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (this.size() === 1) {\r\n\t\t\treturn this.heap.shift();\r\n\t\t}\r\n\t\t[this.heap[0], this.heap[this.size() - 1]] = [this.heap[this.size() - 1], this.heap[0]]\r\n\t\tconst resultVal = this.heap.pop();\r\n\t\tthis.siftDown(0);\r\n\t\treturn resultVal;\r\n\t}\r\n\tsiftDown(i) {\r\n\t\tlet ele = i;\r\n\t\tconst left = this.getLeftIndex(i);\r\n\t\tconst right = this.getRightIndex(i);\r\n\t\tconst size = this.size();\r\n\t\tif (left < size && this.comparFn(this.heap[ele], this.heap[left]) == COMPARE.BIGGER_THAN) {\r\n\t\t\tele = left;\r\n\t\t}\r\n\t\tif(right < size && this.comparFn(this.heap[ele], this.heap[right]) == COMPARE.BIGGER_THAN) {\r\n\t\t\tele = right;\r\n\t\t}\r\n\t\tif(i !== ele) {\r\n\t\t\t[this.heap[i], this.heap[ele]] = [this.heap[ele], this.heap[i]];\r\n\t\t\tthis.siftDown(ele);\r\n\t\t}\r\n\t}\r\n}\r\n"],"names":["COMPARE","EQUAL","LESS_THAN","BIGGER_THAN","defaultCompare","a","b","MinHeap","constructor","compareFn","heap","comparFn","getParentIndex","i","Math","floor","undefined","getLeftIndex","getRightIndex","insert","val","push","siftUp","length","index","parent","size","isEmpty","findMinnum","extract","shift","resultVal","pop","siftDown","ele","left","right"],"mappings":"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"}