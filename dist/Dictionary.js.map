{"version":3,"file":"Dictionary.js","sources":["../src/util.js","../src/Dictionary.js"],"sourcesContent":["/**\r\n * @Description:\r\n * @Author:  wuenyou\r\n * @Date: 2020/11/18\r\n * @LastEditors:\r\n * @LastEditTime: 2020/11/18\r\n */\r\nexport const defaultEquals = function (a, b) {\r\n\treturn a === b\r\n}\r\nconst COMPARE = {\r\n\tEQUAL: 0,\r\n\tLESS_THAN: -1,\r\n\tBIGGER_THAN: 1\r\n}\r\nexport function defaultCompare(a, b) {\r\n\tif (a === b) {\r\n\t\treturn COMPARE.EQUAL;\r\n\t} else if (a < b) {\r\n\t\treturn COMPARE.LESS_THAN;\r\n\t} else {\r\n\t\treturn COMPARE.BIGGER_THAN;\r\n\t}\r\n}\r\nexport function\tkeyToString(str) {\r\n\tif (str === null) {\r\n\t\treturn 'null';\r\n\t} else if (str === undefined) {\r\n\t\treturn 'undefined';\r\n\t} else if(typeof str === 'function') {\r\n\t\treturn str.toString();\r\n\t}\r\n\treturn JSON.stringify(str)\r\n}\r\n","/**\r\n * @Description:\r\n * @Author:  wuenyou\r\n * @Date: 2020/11/28\r\n * @LastEditors:\r\n * @LastEditTime: 2020/11/28\r\n */\r\nimport {keyToString} from \"./util\";\r\nclass ValueObj {\r\n\tconstructor(key, val) {\r\n\t\tthis.key = key;\r\n\t\tthis.value = val;\r\n\t}\r\n\ttoString() {\r\n\t\treturn `[#${this.key}:${this.value}]`;\r\n\t}\r\n}\r\nexport default class Dictionary {\r\n\tconstructor(toStrFn = keyToString) {\r\n\t\tthis.toStrFn = toStrFn;\r\n\t\tthis.dic = {};\r\n\t}\r\n\tset(key, val) {\r\n\t\tif(key && val) {\r\n\t\t\tconst resKey = this.toStrFn(key);\r\n\t\t\tthis.dic[resKey] = new ValueObj(resKey, val);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tremove(key) {\r\n\t\tif(this.hasKey(key)) {\r\n\t\t\tconst resKey = this.toStrFn(key);\r\n\t\t\tdelete this.dic[resKey];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\thasKey(key) {\r\n\t\tconst resKey = this.toStrFn(key);\r\n\t\treturn this.dic[resKey] ? this.dic[resKey] : false;\r\n\t}\r\n\tget(key) {\r\n\t\treturn this.dic[this.toStrFn(key)] ? this.dic[this.toStrFn(key)]['value'] : undefined;\r\n\t}\r\n\tclear() {\r\n\t\tthis.dic = {};\r\n\t\treturn true;\r\n\t}\r\n\tsize() {\r\n\t\treturn Object.keys(this.dic).length;\r\n\t}\r\n\tisEmpty() {\r\n\t\treturn this.size() === 0;\r\n\t}\r\n\tkeys() {\r\n\t\treturn Object.keys(this.dic);\r\n\t}\r\n\tvalues() {\r\n\t\treturn this.keyValues().map(val => val.value);\r\n\t}\r\n\tkeyValues() {\r\n\t\treturn Object.values(this.dic);\r\n\t}\r\n\tforEach(callback) {\r\n\t\tif (typeof callback === 'function') {\r\n\t\t\tconst resVals = this.keyValues();\r\n\t\t\tfor (let i = 0; i < resVals.length; i++) {\r\n\t\t\t\tconst res = callback(resVals[i]['key'], resVals[i]['value']);\r\n\t\t\t\tif (res === false) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],"names":["keyToString","str","undefined","toString","JSON","stringify","ValueObj","constructor","key","val","value","Dictionary","toStrFn","dic","set","resKey","remove","hasKey","get","clear","size","Object","keys","length","isEmpty","values","keyValues","map","forEach","callback","resVals","i","res"],"mappings":"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"}